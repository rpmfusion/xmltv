From 074d069414ee12946685a77e93c8aeec8716b6b3 Mon Sep 17 00:00:00 2001
From: Honir <honir@c4b.co.uk>
Date: Mon, 21 Dec 2020 16:20:00 +0000
Subject: [PATCH 17/50] Fetch programme data via SSL (avoids 301 redirects)

---
 grab/na_dtv/tv_grab_na_dtv | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/grab/na_dtv/tv_grab_na_dtv b/grab/na_dtv/tv_grab_na_dtv
index 5bd741a3..a4cdf860 100755
--- a/grab/na_dtv/tv_grab_na_dtv
+++ b/grab/na_dtv/tv_grab_na_dtv
@@ -141,6 +141,7 @@ $TMP_FILEBASE .= '/na_dtv_';
 my $queue_filename = "$TMP_FILEBASE" . "q";
 
 my $SITEBASE = "http://www.directv.com";
+my $SITEBASESSL = "https://www.directv.com";
 
 # URL for grabbing channel list
 my $CHANNEL_LIST_URL = "$SITEBASE/json/channels";
@@ -149,7 +150,7 @@ my $CHANNEL_LIST_URL = "$SITEBASE/json/channels";
 my $SCHEDULE_URL = "$SITEBASE/json/channelschedule";
 
 # Each program ID will be appended to this URL to get its details.
-my $DETAILS_URL = "$SITEBASE/json/program/flip";
+my $DETAILS_URL = "$SITEBASESSL/json/program/flip";
 
 my $XML_PRELUDE =
     '<?xml version="1.0" encoding="ISO-8859-1"?>' . "\n"
-- 
2.29.2

