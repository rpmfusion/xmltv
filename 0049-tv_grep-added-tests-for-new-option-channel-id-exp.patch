From 13c79da0ef34e20134368caed41bc598189a2836 Mon Sep 17 00:00:00 2001
From: Honir <honir@c4b.co.uk>
Date: Fri, 15 Jan 2021 17:52:23 +0000
Subject: [PATCH 49/50] tv_grep : added tests for new option --channel-id-exp

---
 MANIFEST                                      | 41 ++++++++++++
 ..._grep_channel_id_exp_sat_all_UTF8.expected | 35 +++++++++++
 ...v_grep_channel_id_exp_sat_amp_xml.expected |  4 ++
 ...hannel_id_exp_sat_amp_xml_amp_xml.expected |  4 ++
 ...nnel_id_exp_sat_amp_xml_clump_xml.expected |  4 ++
 ...annel_id_exp_sat_amp_xml_dups_xml.expected |  4 ++
 ...nnel_id_exp_sat_amp_xml_empty_xml.expected |  4 ++
 ...xml_empty_xml_empty_xml_clump_xml.expected |  4 ++
 ...grep_channel_id_exp_sat_attrs_xml.expected |  4 ++
 ...el_id_exp_sat_clump_extract_1_xml.expected |  4 ++
 ...nnel_id_exp_sat_clump_extract_xml.expected |  4 ++
 ...grep_channel_id_exp_sat_clump_xml.expected |  4 ++
 ...nnel_id_exp_sat_clump_xml_amp_xml.expected |  4 ++
 ...el_id_exp_sat_clump_xml_clump_xml.expected |  4 ++
 ...nel_id_exp_sat_clump_xml_dups_xml.expected |  4 ++
 ...el_id_exp_sat_clump_xml_empty_xml.expected |  4 ++
 ..._grep_channel_id_exp_sat_dups_xml.expected |  4 ++
 ...annel_id_exp_sat_dups_xml_amp_xml.expected |  4 ++
 ...nel_id_exp_sat_dups_xml_clump_xml.expected |  4 ++
 ...nnel_id_exp_sat_dups_xml_dups_xml.expected |  4 ++
 ...nel_id_exp_sat_dups_xml_empty_xml.expected |  4 ++
 ...grep_channel_id_exp_sat_empty_xml.expected |  4 ++
 ...nnel_id_exp_sat_empty_xml_amp_xml.expected |  4 ++
 ...el_id_exp_sat_empty_xml_clump_xml.expected |  4 ++
 ...nel_id_exp_sat_empty_xml_dups_xml.expected |  4 ++
 ...el_id_exp_sat_empty_xml_empty_xml.expected |  4 ++
 ..._channel_id_exp_sat_intervals_xml.expected |  4 ++
 ...rep_channel_id_exp_sat_length_xml.expected |  4 ++
 ...ep_channel_id_exp_sat_overlap_xml.expected |  4 ++
 ...rep_channel_id_exp_sat_simple_xml.expected |  4 ++
 ...exp_sat_simple_xml_x_whatever_xml.expected |  4 ++
 ...grep_channel_id_exp_sat_sort1_xml.expected |  4 ++
 ...grep_channel_id_exp_sat_sort2_xml.expected |  4 ++
 ..._grep_channel_id_exp_sat_sort_xml.expected |  4 ++
 ...channel_id_exp_sat_test_empty_xml.expected |  4 ++
 ...channel_id_exp_sat_test_livre_xml.expected |  4 ++
 ..._test_remove_some_overlapping_xml.expected |  4 ++
 ..._exp_sat_test_sort_by_channel_xml.expected |  4 ++
 ..._grep_channel_id_exp_sat_test_xml.expected | 35 +++++++++++
 ...nnel_id_exp_sat_test_xml_test_xml.expected | 62 +++++++++++++++++++
 ...channel_id_exp_sat_whitespace_xml.expected |  4 ++
 ...channel_id_exp_sat_x_whatever_xml.expected |  4 ++
 t/test_filters.t                              |  1 +
 43 files changed, 326 insertions(+)
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_all_UTF8.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_amp_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_amp_xml_amp_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_amp_xml_clump_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_amp_xml_dups_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml_empty_xml_clump_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_attrs_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_clump_extract_1_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_clump_extract_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_clump_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_clump_xml_amp_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_clump_xml_clump_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_clump_xml_dups_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_clump_xml_empty_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_dups_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_dups_xml_amp_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_dups_xml_clump_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_dups_xml_dups_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_dups_xml_empty_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_empty_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_empty_xml_amp_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_empty_xml_clump_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_empty_xml_dups_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_empty_xml_empty_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_intervals_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_length_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_overlap_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_simple_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_simple_xml_x_whatever_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_sort1_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_sort2_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_sort_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_test_empty_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_test_livre_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_test_remove_some_overlapping_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_test_sort_by_channel_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_test_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_test_xml_test_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_whitespace_xml.expected
 create mode 100644 t/data/tv_grep_channel_id_exp_sat_x_whatever_xml.expected

diff --git a/MANIFEST b/MANIFEST
index fcf6a34e..2f0bbcee 100644
--- a/MANIFEST
+++ b/MANIFEST
@@ -1414,6 +1414,47 @@ t/data/tv_grep_on_after_200302161330_UTC_test_remove_some_overlapping_xml.expect
 t/data/tv_grep_on_before_200302161330_UTC_test_remove_some_overlapping_xml.expected
 t/data/tv_grep_premiere_test_remove_some_overlapping_xml.expected
 t/data/tv_grep_previously_shown_test_remove_some_overlapping_xml.expected
+t/data/tv_grep_channel_id_exp_sat_all_UTF8.expected
+t/data/tv_grep_channel_id_exp_sat_amp_xml.expected
+t/data/tv_grep_channel_id_exp_sat_amp_xml_amp_xml.expected
+t/data/tv_grep_channel_id_exp_sat_amp_xml_clump_xml.expected
+t/data/tv_grep_channel_id_exp_sat_amp_xml_dups_xml.expected
+t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml.expected
+t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml_empty_xml_clump_xml.expected
+t/data/tv_grep_channel_id_exp_sat_attrs_xml.expected
+t/data/tv_grep_channel_id_exp_sat_clump_extract_1_xml.expected
+t/data/tv_grep_channel_id_exp_sat_clump_extract_xml.expected
+t/data/tv_grep_channel_id_exp_sat_clump_xml.expected
+t/data/tv_grep_channel_id_exp_sat_clump_xml_amp_xml.expected
+t/data/tv_grep_channel_id_exp_sat_clump_xml_clump_xml.expected
+t/data/tv_grep_channel_id_exp_sat_clump_xml_dups_xml.expected
+t/data/tv_grep_channel_id_exp_sat_clump_xml_empty_xml.expected
+t/data/tv_grep_channel_id_exp_sat_dups_xml.expected
+t/data/tv_grep_channel_id_exp_sat_dups_xml_amp_xml.expected
+t/data/tv_grep_channel_id_exp_sat_dups_xml_clump_xml.expected
+t/data/tv_grep_channel_id_exp_sat_dups_xml_dups_xml.expected
+t/data/tv_grep_channel_id_exp_sat_dups_xml_empty_xml.expected
+t/data/tv_grep_channel_id_exp_sat_empty_xml.expected
+t/data/tv_grep_channel_id_exp_sat_empty_xml_amp_xml.expected
+t/data/tv_grep_channel_id_exp_sat_empty_xml_clump_xml.expected
+t/data/tv_grep_channel_id_exp_sat_empty_xml_dups_xml.expected
+t/data/tv_grep_channel_id_exp_sat_empty_xml_empty_xml.expected
+t/data/tv_grep_channel_id_exp_sat_intervals_xml.expected
+t/data/tv_grep_channel_id_exp_sat_length_xml.expected
+t/data/tv_grep_channel_id_exp_sat_overlap_xml.expected
+t/data/tv_grep_channel_id_exp_sat_simple_xml.expected
+t/data/tv_grep_channel_id_exp_sat_simple_xml_x_whatever_xml.expected
+t/data/tv_grep_channel_id_exp_sat_sort1_xml.expected
+t/data/tv_grep_channel_id_exp_sat_sort2_xml.expected
+t/data/tv_grep_channel_id_exp_sat_sort_xml.expected
+t/data/tv_grep_channel_id_exp_sat_test_empty_xml.expected
+t/data/tv_grep_channel_id_exp_sat_test_livre_xml.expected
+t/data/tv_grep_channel_id_exp_sat_test_remove_some_overlapping_xml.expected
+t/data/tv_grep_channel_id_exp_sat_test_sort_by_channel_xml.expected
+t/data/tv_grep_channel_id_exp_sat_test_xml.expected
+t/data/tv_grep_channel_id_exp_sat_test_xml_test_xml.expected
+t/data/tv_grep_channel_id_exp_sat_whitespace_xml.expected
+t/data/tv_grep_channel_id_exp_sat_x_whatever_xml.expected
 t/data/tv_remove_some_overlapping_all_UTF8.expected
 t/data/tv_remove_some_overlapping_amp_xml.expected
 t/data/tv_remove_some_overlapping_amp_xml_amp_xml.expected
diff --git a/t/data/tv_grep_channel_id_exp_sat_all_UTF8.expected b/t/data/tv_grep_channel_id_exp_sat_all_UTF8.expected
new file mode 100644
index 00000000..eddf9c37
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_all_UTF8.expected
@@ -0,0 +1,35 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv>
+  <channel id="3sat.de">
+    <display-name lang="de">3SAT</display-name>
+  </channel>
+  <programme start="200006031633" channel="3sat.de">
+    <title lang="de">blah</title>
+    <title lang="en">blah</title>
+    <desc lang="de">Blah Blah Blah.</desc>
+    <credits>
+      <director>blah</director>
+      <actor>a</actor>
+      <actor>b</actor>
+    </credits>
+    <date>19901011</date>
+    <country>ES</country>
+    <episode-num system="xmltv_ns">2 . 9 . 0/1</episode-num>
+    <video>
+      <aspect>16:9</aspect>
+    </video>
+    <last-chance />
+    <subtitles type="teletext">
+      <language lang="en">English</language>
+    </subtitles>
+    <rating system="MPAA">
+      <value>PG</value>
+    </rating>
+    <star-rating>
+      <value>3/3</value>
+      <icon src="stars.png" />
+    </star-rating>
+  </programme>
+</tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_amp_xml.expected b/t/data/tv_grep_channel_id_exp_sat_amp_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_amp_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_amp_xml_amp_xml.expected b/t/data/tv_grep_channel_id_exp_sat_amp_xml_amp_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_amp_xml_amp_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_amp_xml_clump_xml.expected b/t/data/tv_grep_channel_id_exp_sat_amp_xml_clump_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_amp_xml_clump_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_amp_xml_dups_xml.expected b/t/data/tv_grep_channel_id_exp_sat_amp_xml_dups_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_amp_xml_dups_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml.expected b/t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml_empty_xml_clump_xml.expected b/t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml_empty_xml_clump_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_amp_xml_empty_xml_empty_xml_clump_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_attrs_xml.expected b/t/data/tv_grep_channel_id_exp_sat_attrs_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_attrs_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_clump_extract_1_xml.expected b/t/data/tv_grep_channel_id_exp_sat_clump_extract_1_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_clump_extract_1_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_clump_extract_xml.expected b/t/data/tv_grep_channel_id_exp_sat_clump_extract_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_clump_extract_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_clump_xml.expected b/t/data/tv_grep_channel_id_exp_sat_clump_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_clump_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_clump_xml_amp_xml.expected b/t/data/tv_grep_channel_id_exp_sat_clump_xml_amp_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_clump_xml_amp_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_clump_xml_clump_xml.expected b/t/data/tv_grep_channel_id_exp_sat_clump_xml_clump_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_clump_xml_clump_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_clump_xml_dups_xml.expected b/t/data/tv_grep_channel_id_exp_sat_clump_xml_dups_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_clump_xml_dups_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_clump_xml_empty_xml.expected b/t/data/tv_grep_channel_id_exp_sat_clump_xml_empty_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_clump_xml_empty_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_dups_xml.expected b/t/data/tv_grep_channel_id_exp_sat_dups_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_dups_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_dups_xml_amp_xml.expected b/t/data/tv_grep_channel_id_exp_sat_dups_xml_amp_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_dups_xml_amp_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_dups_xml_clump_xml.expected b/t/data/tv_grep_channel_id_exp_sat_dups_xml_clump_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_dups_xml_clump_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_dups_xml_dups_xml.expected b/t/data/tv_grep_channel_id_exp_sat_dups_xml_dups_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_dups_xml_dups_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_dups_xml_empty_xml.expected b/t/data/tv_grep_channel_id_exp_sat_dups_xml_empty_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_dups_xml_empty_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_empty_xml.expected b/t/data/tv_grep_channel_id_exp_sat_empty_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_empty_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_empty_xml_amp_xml.expected b/t/data/tv_grep_channel_id_exp_sat_empty_xml_amp_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_empty_xml_amp_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_empty_xml_clump_xml.expected b/t/data/tv_grep_channel_id_exp_sat_empty_xml_clump_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_empty_xml_clump_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_empty_xml_dups_xml.expected b/t/data/tv_grep_channel_id_exp_sat_empty_xml_dups_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_empty_xml_dups_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_empty_xml_empty_xml.expected b/t/data/tv_grep_channel_id_exp_sat_empty_xml_empty_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_empty_xml_empty_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_intervals_xml.expected b/t/data/tv_grep_channel_id_exp_sat_intervals_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_intervals_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_length_xml.expected b/t/data/tv_grep_channel_id_exp_sat_length_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_length_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_overlap_xml.expected b/t/data/tv_grep_channel_id_exp_sat_overlap_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_overlap_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_simple_xml.expected b/t/data/tv_grep_channel_id_exp_sat_simple_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_simple_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_simple_xml_x_whatever_xml.expected b/t/data/tv_grep_channel_id_exp_sat_simple_xml_x_whatever_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_simple_xml_x_whatever_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_sort1_xml.expected b/t/data/tv_grep_channel_id_exp_sat_sort1_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_sort1_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_sort2_xml.expected b/t/data/tv_grep_channel_id_exp_sat_sort2_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_sort2_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_sort_xml.expected b/t/data/tv_grep_channel_id_exp_sat_sort_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_sort_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_test_empty_xml.expected b/t/data/tv_grep_channel_id_exp_sat_test_empty_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_test_empty_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_test_livre_xml.expected b/t/data/tv_grep_channel_id_exp_sat_test_livre_xml.expected
new file mode 100644
index 00000000..8764a7b2
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_test_livre_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_test_remove_some_overlapping_xml.expected b/t/data/tv_grep_channel_id_exp_sat_test_remove_some_overlapping_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_test_remove_some_overlapping_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_test_sort_by_channel_xml.expected b/t/data/tv_grep_channel_id_exp_sat_test_sort_by_channel_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_test_sort_by_channel_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_test_xml.expected b/t/data/tv_grep_channel_id_exp_sat_test_xml.expected
new file mode 100644
index 00000000..ed09d03d
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_test_xml.expected
@@ -0,0 +1,35 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv generator-info-name="my listings generator">
+  <channel id="3sat.de">
+    <display-name lang="de">3SAT</display-name>
+  </channel>
+  <programme start="200006031633" channel="3sat.de">
+    <title lang="de">blah</title>
+    <title lang="en">blah</title>
+    <desc lang="de">Blah Blah Blah.</desc>
+    <credits>
+      <director>blah</director>
+      <actor>a</actor>
+      <actor>b</actor>
+    </credits>
+    <date>19901011</date>
+    <country>ES</country>
+    <episode-num system="xmltv_ns">2 . 9 . 0/1</episode-num>
+    <video>
+      <aspect>16:9</aspect>
+    </video>
+    <last-chance />
+    <subtitles type="teletext">
+      <language lang="en">English</language>
+    </subtitles>
+    <rating system="MPAA">
+      <value>PG</value>
+    </rating>
+    <star-rating>
+      <value>3/3</value>
+      <icon src="stars.png" />
+    </star-rating>
+  </programme>
+</tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_test_xml_test_xml.expected b/t/data/tv_grep_channel_id_exp_sat_test_xml_test_xml.expected
new file mode 100644
index 00000000..05fa6883
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_test_xml_test_xml.expected
@@ -0,0 +1,62 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv generator-info-name="my listings generator">
+  <channel id="3sat.de">
+    <display-name lang="de">3SAT</display-name>
+  </channel>
+  <programme start="200006031633" channel="3sat.de">
+    <title lang="de">blah</title>
+    <title lang="en">blah</title>
+    <desc lang="de">Blah Blah Blah.</desc>
+    <credits>
+      <director>blah</director>
+      <actor>a</actor>
+      <actor>b</actor>
+    </credits>
+    <date>19901011</date>
+    <country>ES</country>
+    <episode-num system="xmltv_ns">2 . 9 . 0/1</episode-num>
+    <video>
+      <aspect>16:9</aspect>
+    </video>
+    <last-chance />
+    <subtitles type="teletext">
+      <language lang="en">English</language>
+    </subtitles>
+    <rating system="MPAA">
+      <value>PG</value>
+    </rating>
+    <star-rating>
+      <value>3/3</value>
+      <icon src="stars.png" />
+    </star-rating>
+  </programme>
+  <programme start="200006031633" channel="3sat.de">
+    <title lang="de">blah</title>
+    <title lang="en">blah</title>
+    <desc lang="de">Blah Blah Blah.</desc>
+    <credits>
+      <director>blah</director>
+      <actor>a</actor>
+      <actor>b</actor>
+    </credits>
+    <date>19901011</date>
+    <country>ES</country>
+    <episode-num system="xmltv_ns">2 . 9 . 0/1</episode-num>
+    <video>
+      <aspect>16:9</aspect>
+    </video>
+    <last-chance />
+    <subtitles type="teletext">
+      <language lang="en">English</language>
+    </subtitles>
+    <rating system="MPAA">
+      <value>PG</value>
+    </rating>
+    <star-rating>
+      <value>3/3</value>
+      <icon src="stars.png" />
+    </star-rating>
+  </programme>
+</tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_whitespace_xml.expected b/t/data/tv_grep_channel_id_exp_sat_whitespace_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_whitespace_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/data/tv_grep_channel_id_exp_sat_x_whatever_xml.expected b/t/data/tv_grep_channel_id_exp_sat_x_whatever_xml.expected
new file mode 100644
index 00000000..e20fb42a
--- /dev/null
+++ b/t/data/tv_grep_channel_id_exp_sat_x_whatever_xml.expected
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!DOCTYPE tv SYSTEM "xmltv.dtd">
+
+<tv></tv>
diff --git a/t/test_filters.t b/t/test_filters.t
index 5c6d5468..82388ba6 100755
--- a/t/test_filters.t
+++ b/t/test_filters.t
@@ -86,6 +86,7 @@ if ($full) {
        [ [ 'tv_grep', '--category', 'g', '--or', '--title', 'h'    ], 1 ],
        [ [ 'tv_grep', '-i', '--category', 'i', '--title', 'j'      ], 1 ],
        [ [ 'tv_grep', '-i', '--category', 'i', '--title', 'h'      ], 1 ],
+       [ [ 'tv_grep', '--channel-id-exp', 'sat'                    ], 1 ],
       );
 }
 
-- 
2.29.2

